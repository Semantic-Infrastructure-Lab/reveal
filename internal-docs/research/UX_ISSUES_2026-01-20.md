# Reveal UX Issues Report

**Session**: mystic-knight-0120
**Date**: 2026-01-20
**Version**: v0.39.0

---

## Issues Found This Session

### 1. BUG: HTML Metadata Dict Not Displayed (FIXED)

**Symptom**: `reveal file.html --metadata` showed empty output, tests failing

**Cause**: `_render_text_categories()` in `structure.py` skipped dict-type items before reaching the metadata handler

**Fix**: Added special handling for `metadata` category before the `isinstance(items, list)` check

**Files**: `reveal/display/structure.py`

**Status**: ✅ FIXED

---

### 2. UX: Line Extraction Syntax Ambiguity (FIXED)

**Issue**: `reveal file.py:50` fails with "file.py:50 not found"

**Expected**: Line 50 of file.py

**Fix**: Added support for `file:line` and `file:line-line` syntax in `routing.py`

Now both work:
- `reveal file.py:50` ✅
- `reveal file.py :50` ✅
- `reveal file.py:50-60` ✅

**Files**: `reveal/cli/routing.py`

**Status**: ✅ FIXED

---

### 3. UX: Section Extraction with Line Numbers

**Issue**: `reveal file.md --section 15` fails if 15 is a line number

**Context**: Breadcrumbs show `:15` for heading at line 15, but `--section 15` doesn't work

**Actual behavior**: `--section` expects heading index (1, 2, 3...) not line number

**Why confusing**: Breadcrumb `:15` suggests `:15` or `--section 15` would extract that heading

**Possible fixes**:
1. Make `--section` accept both index and line number
2. Change breadcrumb display to show heading index instead of line
3. Add explicit help: "Use --section 1 for first heading, not line number"

---

### 4. INFO: Previous Session Work Not Committed

**Issue**: Previous session (lingering-tide-0119) modified PRIORITIES.md but it was already deleted in commit f2f01c9

**Impact**: None (file was intentionally removed for "clean project boundary")

**Learning**: Files marked "modified" in README may reference files that no longer exist in repo

---

## Previously Documented Issues (From Dogfooding Report)

### 5. UX: `:?` Shown for Missing Line Numbers

**Issue**: INI and XML files show `:?` in breadcrumbs where line info isn't available

**Example**: `config.ini:? | [section]`

**Impact**: Low - cosmetic

---

### 6. UX: `--languages` Output Too Long

**Issue**: `--languages` shows 86+ languages with no distinction between:
- Fully supported (structure analysis)
- Tree-sitter only (basic parsing)
- Data/config formats

**README claims**: "40+ languages"

**Actual output**: 107 lines including all tree-sitter languages

**Possible fix**: Tier the output or add `--languages brief` flag

---

### 7. UX: No `--adapters` Flag

**Issue**: Must use `reveal help://adapters` to see adapter list

**Users expect**: `reveal --adapters` similar to `--languages`

**Possible fix**: Add `--adapters` flag that shows quick adapter summary

---

## Improvement Suggestions from Dogfooding

### Future Work Items

1. **Adapter self-test capability**: `reveal ast://test` to verify adapter works
2. **Help sections for all adapters**: `reveal help://adapters/{name}` with full examples
3. **Better database error messages**: More helpful errors for sqlite://, mysql://

---

## Files Modified This Session

| File | Change |
|------|--------|
| `reveal/display/structure.py` | +7 lines: HTML metadata dict handling |
| `reveal/cli/routing.py` | +15 lines: Support `file:line` extraction syntax |

**Prior session changes (uncommitted)**:
| File | Change |
|------|--------|
| `reveal/analyzers/powershell.py` | +47 lines: `_get_signature()` override |
| `reveal/display/formatting.py` | +58 lines: CSV/XML formatters |
| `reveal/display/structure.py` | +29 lines: Skip non-list, CSV/XML handlers |

---

## Priority for Next Session

1. ~~**High**: Line extraction syntax improvement (issue #2)~~ ✅ FIXED
2. **Medium**: Section extraction clarity (issue #3)
3. **Low**: `:?` cosmetic fix (issue #5)
4. **Low**: `--languages` output improvement (issue #6)

---

**Full Path**: `/home/scottsen/src/projects/reveal/external-git/internal-docs/research/UX_ISSUES_2026-01-20.md`
